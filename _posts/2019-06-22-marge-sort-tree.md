---
layout: post
title: Marge Sort Tree
author-id: HBKWasi
tags: [Data Structures]
---
<!-- This is also a comment in markdown -->

## Marge Sort Tree (MST)

?? ?????????? ???? ?????????: ???????? ????, ????? ???? ????????, ??????? ????? ???????? ????? ????? ???? ?? ????? ?? ???????? ???? ???? ???:-

[???????? ????](http://www.shafaetsplanet.com/?p=1557)

[????? ????](https://roomcharshotin.wordpress.com/2018/09/26/merge-sort-details/)

[??????? ?????](http://www.shafaetsplanet.com/?p=2279)

??????? ???????: ?????? ???? ???? ?????? ???? ???????? ???? ?????? ??? ??? ???????? ????????? ?????? ?? ??????????? ????? ???? ???? ?????????? ? ?? ?????? l, r ? k ????? ???? ?????? ???? ??? ????????? l ???? r ?? ????? k ?? ???? ??? ???? ?????? ????

???????: ??? ??? ???? ???? ?????? ??? ?????? ?? ?????? ???? ???? ???? ????? ?????? ???? ???? ????? ???????? ?? ????? ?? ?????? ?????? ??? ???, ????? ???? ???, ????? ???? ???? ?????? k ?? ???? ???? ????? ???? ????? ??? ???? ????? ??? ??? ?????? ????? ???? ??? ?????? ???????? ???? ???? ????? ??? ? ???? ?????????????  O(log(n))  ??? ? ??? q  ?? ?????? ??? ??? ???? ????????????? O(qnlog(n)) ???? ??? ??? ???????? ????? ?? q ??? n ?? ????? ???? ??? ???? ????? ??? ??? ?? ??? ??? ???? ???? ????????????? ????? ???? ????? ???? ???????? ????? ??????? ???? ??? ???????? ????? ???????? ????? ??????? ??? ? ???? ?????? ??? ?? ???, ?? ????? ?? ?????? ?????? ?????? ????? ??? ??? ???? ????  ???? ???? ???? ????? ???? ???????? ?? ??????? ???? ????? ???? ???? ??? ???? ?????? ?????????? ??? ???? ??? ??? ???? ??? ??? ????? ???? ?????? ?? ???? ??????? ???? ???, ?????? ?????? ???? ???????? ????? ?????? ???????? ???? ??????? ???? ???? ????????? ??? ???? ??? ??? ???? ??? ?????? ??????? ?? ?????? ???? ??????? ???? ??? ?????? ??????? ??? ????? ????? ???????? ???? ??? ????? ???? ?? ?????? ??? ???? ???????? ???? ?????? ???? ??? ????? ??????? ?? ??????? ??????? ??? ???? ?????? ????? ??? ????????? ????? ?? ????? ??? ?????? ???? ????? ??????? ??? ????? ???? ???????? ???? ??? ?????????? ???? ?? ????? ? ????? ???? ???? ?? ?? ?????? ???????? ???? ????? ???? ?????? ?????? ????? ???? ???? ??? ??? ???? ????? ?????? ????? ???? ??? ???????? ???? ????? ???? ????? ????? ???? ???? ???? ???? ??????? ? ??? ?

??????????????: ???????????????? ???? ???? ?????? ???? ??? ?????? ???? ????? ???????? ?????? ???????? ????? ????? ?????? ?? ???? ???? ???? ????? ???? ??????? ???? ???? ???? ??????? ?????? ????? ?? ??? ??? ??? ???? ?? ??? ????? ????????? ?? ?????? ???? ???? ???? marge() ??????? ??????? ???? ???? ??? ????? ????? ???? ???????? ????? ???? ???? ????? ? ?????? ????? ???????? ??? ???? ???? ??? ???? ?????? ?????? ???? ?????? ???? ???? ???? ?????? ??????? ??? ????????? ? ?? ???????? ???????? ????? ? ?????? ????? ? ????? ?? ?????????? ????? ??????? ?????? ??? ???? ??????? ??? ???? ??????? ????? ??? ????? ???????? ??? ??? ???? ???????? ??????? ????????? ???? ??? ???? ???? ?????? ??????? ??????? ??? ?????? ?????????? ???? ???? ?????? ????? ?? ???? ?? ???????????? ???????? (???? ???? ?????? ??? ???)  ????? ??? ??? ????? ????? ???? ??? ?????? ????????? ??????

???? ???? ??++ ?? ??? ???? ??:

????? ?????:
```cpp
vector<int>tree[4*N];
int A[N];
void build_tree( int cur , int l , int r )
{
     if( l==r )
     {
            tree[cur].push_back( a[ l ] );
            return ;
     }
     int mid = (l+r)/2;
     build_tree(2*cur, l , mid ); // Build left tree 
     build_tree(2*cur+1 , mid+1 , r ); // Build right tree
     tree[cur] = merge( tree[2*cur] , tree[2*cur+1] ); //Merging the two sorted arrays
}
```
?????? ?????:
```cpp
int query( int cur, int l, int r, int x, int y, int k)
{
      if( r < x || l > y )
      {
           return 0; //out of range
      }
      if( x<=l && r<=y )
      {
            //Binary search over the current sorted vector to find elements smaller than K
            return upper_bound(tree[cur].begin(),tree[cur].end(),K)-tree[cur].begin();
      }
      int mid=(l+r)/2;
      return query(2*cur,l,mid,x,y,k)+query(2*cur+1,mid+1,r,x,y,k);
}
```
????????????? ?????????:

????? ???? ???? ????????????? ??? O(nlogn)? ??? ???? ????? ??????? ???? ????? ??? ??? ?????? ????? ?????? ????????????? ?? ???? ???? ???? ?????? ????? ????? ?? ?????? ?????????????? O(nlogn) ???? ???? ???? ?????? ???????? logn ??????? ??? ???? ?? ????? ???? (???? ?? ????)?

?????? ???????? ????????????? O(log^{2} n) ???? ???? ???? ????? ?? ???????? logn ?? ???? ??? ??? ???? ?? ??????? ????? ?? ???? ????? ??? ??????? ????? ??? ?????, ??? ????????????? logn? ??? ??? ????????????? ??? O(log^{2} n) ?

?????????? ????????: 

Anton and Permutation
KQUERYO
?? ???????? ???? ????? ???? ???? ???? ????????? ????????????? ??? ???  ?